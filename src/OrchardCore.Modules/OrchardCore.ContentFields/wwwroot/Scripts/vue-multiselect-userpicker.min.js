function debounceUserPicker(e,t,n){var i;return function(){var r=this,s=arguments,u=function(){i=null,n||e.apply(r,s)},a=n&&!i;clearTimeout(i),i=setTimeout(u,t),a&&e.apply(r,s)}}function initVueMultiselectUserPicker(e){if(e){var t=e.id,n=JSON.parse(e.dataset.selectedUsers||"[]"),r=e.dataset.searchUrl,s=JSON.parse(e.dataset.multiple),u=debounceUserPicker((function(e,t){e.isLoading=!0;var n=r;t&&(n+="&query="+t),fetch(n).then((function(t){t.json().then((function(t){e.options=t,e.isLoading=!1}))}))}),250),a=Vue.component("vue-multiselect",window.VueMultiselect.default),c=new Vue({el:"#"+t,components:{"vue-multiselect":a},data:{value:null,arrayOfUsers:n,options:[]},computed:{selectedIds:function(){return this.arrayOfUsers.map((function(e){return e.id})).join(",")},isDisabled:function(){return this.arrayOfUsers.length>0&&!s}},watch:{selectedIds:function(){setTimeout((function(){$(document).trigger("contentpreview:render")}),100)}},created:function(){this.asyncFind()},methods:{asyncFind:function(e){u(this,e)},onSelect:function(e,t){var n=this;for(i=0;i<n.arrayOfUsers.length;i++)if(n.arrayOfUsers[i].id===e.id)return;n.arrayOfUsers.push(e)},remove:function(e){this.arrayOfUsers.splice(this.arrayOfUsers.indexOf(e),1)}}}),o=new CustomEvent("vue-multiselect-userpicker-created",{detail:{vm:c}});document.querySelector("body").dispatchEvent(o)}}
